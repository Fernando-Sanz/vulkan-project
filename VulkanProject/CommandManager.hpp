#pragma once

#include <vulkan/vulkan.h>
#include <stdexcept>

#include "Device.hpp"


class CommandManager {
public:

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// GETTERS AND SETTERS

	VkCommandBuffer getCommandBuffer(int index) { return commandBuffers[index]; }


	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// METHODS

	void createCommandPool(Device device, int bufferCount);

	VkCommandBuffer beginSingleTimeCommands();

	void endSingleTimeCommands(VkCommandBuffer commandBuffer);

	void cleanup();

private:

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// CLASS MEMBERS

	Device device;

	VkCommandPool commandPool;
	std::vector<VkCommandBuffer> commandBuffers; // destroyed with command pool


	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// METHODS

	void allocateCommandBuffers(int bufferCount);
};
